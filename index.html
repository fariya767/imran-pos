<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡¶á‡¶Æ‡¶∞‡¶æ‡¶® ‡¶á‡¶≤‡ßá‡¶ï‡¶ü‡ßç‡¶∞‡¶®‡¶ø‡¶ï‡ßç‡¶∏ POS</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
body { background:#f4f6f9; }
.header { background:#0d6efd; color:white; padding:15px; border-radius:10px; }
.summary-box { padding:10px; border-radius:8px; color:white; text-align:center; margin-bottom:10px; }
.sale-box { background:#198754; }
.profit-box { background:#6f42c1; }
.footer { font-size:12px; color:gray; text-align:center; margin-top:20px; }
.invoice-box { background:white; padding:20px; border-radius:10px; display:none; }
.due-box { background:white; padding:15px; border-radius:10px; margin-top:15px; }
@media print {
  body * { visibility:hidden; }
  #invoiceSection, #invoiceSection * { visibility:visible; }
  #invoiceSection { position:absolute; left:0; top:0; width:100%; }
}
</style>
</head>

<body>

<div class="container py-3">

<div class="header text-center mb-3">
<h4>‡¶á‡¶Æ‡¶∞‡¶æ‡¶® ‡¶á‡¶≤‡ßá‡¶ï‡¶ü‡ßç‡¶∞‡¶®‡¶ø‡¶ï‡ßç‡¶∏ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶° ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏‡¶ø‡¶Ç ‡¶∏‡ßá‡¶®‡ßç‡¶ü‡¶æ‡¶∞</h4>
<small>‡¶ó‡¶¶‡¶ñ‡¶æ‡¶≤‡¶ø ‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞, ‡¶ù‡¶ø‡¶ï‡¶∞‡¶ó‡¶æ‡¶õ‡¶æ, ‡¶Ø‡¶∂‡ßã‡¶∞</small>
</div>

<div class="summary-box sale-box">
‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶Æ‡ßã‡¶ü ‡¶¨‡¶ø‡¶ï‡ßç‡¶∞‡ßü: <span id="grandTotal">0</span> ‡ß≥
</div>

<div class="summary-box profit-box">
‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶Æ‡ßã‡¶ü ‡¶≤‡¶æ‡¶≠: <span id="grandProfit">0</span> ‡ß≥
</div>

<div class="card p-3 shadow-sm">

<div class="row g-3">

<div class="col-12">
<label>‡¶™‡¶£‡ßç‡¶Ø ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶®</label>
<select id="productSelect" class="form-select"></select>
</div>

<div class="col-4">
<label>‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£</label>
<input type="number" id="quantity" class="form-control" oninput="calculateTotal()">
</div>

<div class="col-4">
<label>‡¶ï‡ßç‡¶∞‡ßü ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø</label>
<input type="number" id="buyPrice" class="form-control" oninput="calculateTotal()">
</div>

<div class="col-4">
<label>‡¶¨‡¶ø‡¶ï‡ßç‡¶∞‡ßü ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø</label>
<input type="number" id="sellPrice" class="form-control" oninput="calculateTotal()">
</div>

<div class="col-12">
<label>‡¶ï‡¶æ‡¶∏‡ßç‡¶ü‡¶Æ‡¶æ‡¶∞‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ (‡¶¨‡¶æ‡¶ï‡¶ø ‡¶π‡¶≤‡ßá)</label>
<input type="text" id="customerName" class="form-control" placeholder="‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï">
</div>

</div>

<hr>

<h5 class="text-end">‡¶Æ‡ßã‡¶ü: <span id="total">0</span> ‡ß≥</h5>
<h6 class="text-end text-success">‡¶≤‡¶æ‡¶≠: <span id="profit">0</span> ‡ß≥</h6>

<button class="btn btn-success w-100 mt-3" onclick="saveSale()">‡¶¨‡¶ø‡¶ï‡ßç‡¶∞‡¶ø ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£</button>

</div>

<!-- Invoice -->
<div id="invoiceSection" class="invoice-box mt-3 shadow-sm">
<h4 class="text-center">‡¶á‡¶Æ‡¶∞‡¶æ‡¶® ‡¶á‡¶≤‡ßá‡¶ï‡¶ü‡ßç‡¶∞‡¶®‡¶ø‡¶ï‡ßç‡¶∏</h4>
<hr>
<p>‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ: <span id="invDate"></span></p>
<p>‡¶ï‡¶æ‡¶∏‡ßç‡¶ü‡¶Æ‡¶æ‡¶∞: <span id="invCustomer"></span></p>
<p>‡¶™‡¶£‡ßç‡¶Ø: <span id="invProduct"></span></p>
<p>‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£: <span id="invQty"></span></p>
<hr>
<h5>‡¶Æ‡ßã‡¶ü: <span id="invTotal"></span> ‡ß≥</h5>
<button class="btn btn-primary w-100" onclick="printInvoice()">üñ®Ô∏è ‡¶™‡ßç‡¶∞‡¶ø‡¶®‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</button>
</div>

<!-- Due List -->
<div class="due-box shadow-sm">
<h5>‡¶¨‡¶æ‡¶ï‡¶ø ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ</h5>
<ul id="dueList" class="list-group"></ul>
</div>

<div class="footer">
¬© 2026 Imran Electronics POS System
</div>

</div>

<script>

let products = JSON.parse(localStorage.getItem("products")) || [];
let sales = JSON.parse(localStorage.getItem("sales")) || [];
let dues = JSON.parse(localStorage.getItem("dues")) || [];

function displayProducts(){
productSelect.innerHTML="";
products.forEach((item,index)=>{
let option=document.createElement("option");
option.value=index;
option.text=item.name;
productSelect.appendChild(option);
});
}

function calculateTotal(){
let q=parseFloat(quantity.value)||0;
let sell=parseFloat(sellPrice.value)||0;
let buy=parseFloat(buyPrice.value)||0;
total.innerText=q*sell;
profit.innerText=q*(sell-buy);
}

function saveSale(){

let index=productSelect.value;
let q=parseInt(quantity.value);
let buy=parseFloat(buyPrice.value);
let sell=parseFloat(sellPrice.value);
let customer=customerName.value;

if(!q || !buy || !sell){ alert("‡¶§‡¶•‡ßç‡¶Ø ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®"); return; }
if(products[index].stock<q){ alert("‡¶∏‡ßç‡¶ü‡¶ï ‡¶ï‡¶Æ ‡¶Ü‡¶õ‡ßá!"); return; }

products[index].stock-=q;

let totalVal=q*sell;
let profitVal=q*(sell-buy);

sales.push({total:totalVal, profit:profitVal});

if(customer){
dues.push({name:customer, amount:totalVal});
}

localStorage.setItem("products", JSON.stringify(products));
localStorage.setItem("sales", JSON.stringify(sales));
localStorage.setItem("dues", JSON.stringify(dues));

updateSummary();
displayDueList();
showInvoice(customer,products[index].name,q,totalVal);

quantity.value="";
buyPrice.value="";
sellPrice.value="";
customerName.value="";
total.innerText="0";
profit.innerText="0";
}

function updateSummary(){
let totalSum=0, profitSum=0;
sales.forEach(item=>{
totalSum+=item.total;
profitSum+=item.profit;
});
grandTotal.innerText=totalSum;
grandProfit.innerText=profitSum;
}

function displayDueList(){
dueList.innerHTML="";
dues.forEach((item,index)=>{
let li=document.createElement("li");
li.className="list-group-item d-flex justify-content-between";
li.innerHTML=`${item.name} - ${item.amount} ‡ß≥ 
<button class="btn btn-sm btn-danger" onclick="clearDue(${index})">‡¶™‡¶∞‡¶ø‡¶∂‡ßã‡¶ß</button>`;
dueList.appendChild(li);
});
}

function clearDue(index){
dues.splice(index,1);
localStorage.setItem("dues", JSON.stringify(dues));
displayDueList();
}

function showInvoice(customer,product,qty,totalVal){
invoiceSection.style.display="block";
invDate.innerText=new Date().toLocaleString();
invCustomer.innerText=customer || "Cash";
invProduct.innerText=product;
invQty.innerText=qty;
invTotal.innerText=totalVal;
}

function printInvoice(){
window.print();
}

displayProducts();
updateSummary();
displayDueList();

</script>

</body>
</html>
